import{_ as Q,i as n,u as X,j as S,x as Y,k as ee,c as d,a as t,b as te,h as E,w as se,F as z,o as p,f as ae,e as f,g as l,v as r,t as c,m as oe,y as B,z as R,n as A}from"./index-D08fRg5P.js";import{a as F}from"./index-t--hEgTQ.js";import{_ as le}from"./Modal-C0QXdCOS.js";const re={class:"text-center"},ne={class:"text-sm text-gray-700"},ie={class:"p-6"},ue={class:"grid grid-cols-3 gap-4"},de={class:"space-y-1"},pe={class:"space-y-1"},me={class:"space-y-1"},ve={class:"space-y-1"},ce={class:"space-y-1"},be={key:0,class:"text-red-500 text-xs mt-1 animate-pulse-fast"},ge={class:"space-y-1"},fe={key:0,class:"text-red-500 text-xs mt-1 animate-pulse-fast"},ye={class:"space-y-1"},xe=["value"],we={key:0,class:"text-red-500 text-xs mt-1"},he={class:"space-y-1"},Ne={class:"space-y-1"},ke={class:"space-y-1"},Se={class:"space-y-1"},Ie={class:"space-y-1"},Pe={class:"space-y-1"},Ce={class:"grid grid-cols-3 gap-4"},De={class:"space-y-1"},qe={class:"space-y-1"},Ve={class:"relative"},Me=["type"],Ue={class:"text-sm text-gray-600 mt-2"},Ee={key:0,class:"text-red-500 text-xs mt-1 animate-pulse-fast"},ze={class:"space-y-1"},Be={class:"relative"},Re=["type"],Ae={key:0,class:"text-sm text-red-500 mt-1 animate-pulse-fast"},Fe={class:"flex justify-end space-x-2 my-4"},Te=["disabled"],je=["disabled"],We={__name:"EmployeeSignup",emits:["open","close","success"],setup(_e,{emit:T}){const I=n(!1),D=T;X();const y=n(!1),i=n(""),v=n([]),x=n(!1),w=n(!1),h=n(""),b=n(""),g=n(""),u=n(""),P=()=>{I.value=!1,J(),D("close")},s=n({employeeIdNumber:"",username:"",password:"",firstName:"",middleName:"",lastName:"",position:"",civilStatus:"Single",contactInfo:"",email:"",salary:0,sss:"",philhealth:"",pagibig:"",tin:"",hireDate:new Date().toISOString().slice(0,10),role:"employee",status:"pending"}),N=S(()=>{const o=s.value.password;if(!o||o.length<8)return"Weak";const e=/[A-Z]/.test(o),a=/[a-z]/.test(o),m=/[0-9]/.test(o),M=/[^A-Za-z0-9]/.test(o),U=[e,a,m,M].filter(Boolean).length;return o.length>=12&&U>=3?"Strong":o.length>=8&&U>=2?"Medium":"Weak"}),j=S(()=>({"text-red-500":N.value==="Weak","text-yellow-500":N.value==="Medium","text-green-500":N.value==="Strong"})),C=S(()=>s.value.password===h.value),W=S(()=>y.value||!C.value||!!b.value||!!g.value||!!u.value||!s.value.position||v.value.length===0);Y(()=>s.value.salary,o=>{});const _=async()=>{var o;try{const e=await F.get("http://localhost:7777/api/positions");v.value=e.data.map(a=>({_id:a._id,name:a.name,salary:a.salary})),v.value.length===0&&k("No positions available. Contact your admin.")}catch(e){console.error("Error fetching positions:",((o=e.response)==null?void 0:o.data)||e.message),k("Failed to load positions. Contact your admin."),v.value=[]}},L=()=>{x.value=!x.value},$=()=>{w.value=!w.value},H=()=>{const o=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;b.value=o.test(s.value.email)?"":"Please enter a valid email address."},Z=()=>{const o=/^\d{11}$/;g.value=o.test(s.value.contactInfo)?"":"Please enter a valid 11-digit phone number."},q=()=>{const o=s.value.password;o?o.length<8?u.value="Password must be at least 8 characters long.":!/[A-Za-z]/.test(o)||!/[0-9]/.test(o)?u.value="Password must contain letters and numbers.":u.value="":u.value="Password is required."},G=()=>{const o=v.value.find(e=>e.name===s.value.position);o?s.value.salary=o.salary:s.value.salary=0},O=async()=>{var o,e,a;if(!C.value||b.value||g.value||u.value){k("Please fix all validation errors before submitting.");return}y.value=!0,i.value="";try{const m={employeeIdNumber:s.value.employeeIdNumber,username:s.value.username,password:s.value.password,firstName:s.value.firstName,middleName:s.value.middleName||"",lastName:s.value.lastName,email:s.value.email,contactInfo:s.value.contactInfo,civilStatus:s.value.civilStatus,position:s.value.position,salary:s.value.salary,sss:s.value.sss||"",philhealth:s.value.philhealth||"",pagibig:s.value.pagibig||"",tin:s.value.tin||"",hireDate:s.value.hireDate,role:s.value.role,status:s.value.status};console.log("Sending request data:",m),(await F.post("http://localhost:7777/api/employees/register",m)).status===201&&(V(),K("Account request submitted successfully! Awaiting admin approval."),D("success","Account request submitted successfully!"),setTimeout(()=>{P()},3e3))}catch(m){console.error("Submit request error:",((o=m.response)==null?void 0:o.data)||m.message),k(((a=(e=m.response)==null?void 0:e.data)==null?void 0:a.error)||"Failed to submit request. Please try again.")}finally{y.value=!1}},J=()=>{V(),i.value=""},V=()=>{s.value={employeeIdNumber:"",username:"",password:"",firstName:"",middleName:"",lastName:"",position:"",civilStatus:"Single",contactInfo:"",email:"",salary:0,sss:"",philhealth:"",pagibig:"",tin:"",hireDate:new Date().toISOString().slice(0,10),role:"employee",status:"pending"},h.value="",x.value=!1,w.value=!1,b.value="",g.value="",u.value=""},K=o=>{i.value=o,setTimeout(()=>{i.value=""},5e3)},k=o=>{i.value=o,setTimeout(()=>{i.value=""},5e3)};return ee(()=>{_()}),(o,e)=>(p(),d(z,null,[t("div",re,[t("p",ne,[e[17]||(e[17]=E(" Don't have an account? ")),t("a",{href:"#",onClick:e[0]||(e[0]=a=>I.value=!0),class:"text-blue-500 hover:underline"}," Request an account ")])]),te(le,{show:I.value,onClose:P},{default:se(()=>[t("div",ie,[e[41]||(e[41]=t("h2",{class:"text-xl font-bold mb-4 text-gray-900"},"Request Account Creation",-1)),t("form",{onSubmit:ae(O,["prevent"]),class:"space-y-6"},[t("div",null,[e[33]||(e[33]=t("h3",{class:"text-base font-semibold text-gray-800 mb-3"},"Basic Information",-1)),t("div",ue,[t("div",de,[e[18]||(e[18]=t("label",{for:"employeeIdNumber",class:"text-sm font-medium text-gray-700"},"Employee ID Number",-1)),l(t("input",{"onUpdate:modelValue":e[1]||(e[1]=a=>s.value.employeeIdNumber=a),type:"text",id:"employeeIdNumber",class:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 ease-in-out hover:border-blue-300",placeholder:"Enter your employee ID",required:""},null,512),[[r,s.value.employeeIdNumber]])]),t("div",pe,[e[19]||(e[19]=t("label",{for:"firstName",class:"text-sm font-medium text-gray-700"},"First Name",-1)),l(t("input",{"onUpdate:modelValue":e[2]||(e[2]=a=>s.value.firstName=a),type:"text",id:"firstName",class:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 ease-in-out hover:border-blue-300",placeholder:"Enter your first name",required:""},null,512),[[r,s.value.firstName]])]),t("div",me,[e[20]||(e[20]=t("label",{for:"middleName",class:"text-sm font-medium text-gray-700"},"Middle Name",-1)),l(t("input",{"onUpdate:modelValue":e[3]||(e[3]=a=>s.value.middleName=a),type:"text",id:"middleName",class:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 ease-in-out hover:border-blue-300",placeholder:"Enter your middle name"},null,512),[[r,s.value.middleName]])]),t("div",ve,[e[21]||(e[21]=t("label",{for:"lastName",class:"text-sm font-medium text-gray-700"},"Last Name",-1)),l(t("input",{"onUpdate:modelValue":e[4]||(e[4]=a=>s.value.lastName=a),type:"text",id:"lastName",class:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 ease-in-out hover:border-blue-300",placeholder:"Enter your last name",required:""},null,512),[[r,s.value.lastName]])]),t("div",ce,[e[22]||(e[22]=t("label",{for:"email",class:"text-sm font-medium text-gray-700"},"Email",-1)),l(t("input",{"onUpdate:modelValue":e[5]||(e[5]=a=>s.value.email=a),type:"email",id:"email",class:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 ease-in-out hover:border-blue-300",placeholder:"Enter your email",required:"",onInput:H},null,544),[[r,s.value.email]]),b.value?(p(),d("p",be,c(b.value),1)):f("",!0)]),t("div",ge,[e[23]||(e[23]=t("label",{for:"contactInfo",class:"text-sm font-medium text-gray-700"},"Contact Number",-1)),l(t("input",{"onUpdate:modelValue":e[6]||(e[6]=a=>s.value.contactInfo=a),type:"text",id:"contactInfo",class:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 ease-in-out hover:border-blue-300",placeholder:"09123456789",required:"",pattern:"\\d{11}",title:"Please enter an 11-digit phone number (e.g., 09123456789)",onInput:Z},null,544),[[r,s.value.contactInfo]]),g.value?(p(),d("p",fe,c(g.value),1)):f("",!0)]),t("div",ye,[e[25]||(e[25]=t("label",{for:"position",class:"text-sm font-medium text-gray-700"},"Position",-1)),l(t("select",{"onUpdate:modelValue":e[7]||(e[7]=a=>s.value.position=a),id:"position",class:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 ease-in-out hover:border-blue-300",required:"",onChange:G},[e[24]||(e[24]=t("option",{value:"",disabled:""},"Select a position",-1)),(p(!0),d(z,null,oe(v.value,a=>(p(),d("option",{key:a._id,value:a.name},c(a.name),9,xe))),128))],544),[[B,s.value.position]]),v.value.length===0?(p(),d("p",we,"No positions available. Contact your admin.")):f("",!0)]),t("div",he,[e[27]||(e[27]=t("label",{for:"civilStatus",class:"text-sm font-medium text-gray-700"},"Civil Status",-1)),l(t("select",{"onUpdate:modelValue":e[8]||(e[8]=a=>s.value.civilStatus=a),id:"civilStatus",class:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 ease-in-out hover:border-blue-300",required:""},e[26]||(e[26]=[t("option",{value:"Single"},"Single",-1),t("option",{value:"Married"},"Married",-1),t("option",{value:"Divorced"},"Divorced",-1),t("option",{value:"Widowed"},"Widowed",-1)]),512),[[B,s.value.civilStatus]])]),t("div",Ne,[e[28]||(e[28]=t("label",{for:"hireDate",class:"text-sm font-medium text-gray-700"},"Hire Date",-1)),l(t("input",{"onUpdate:modelValue":e[9]||(e[9]=a=>s.value.hireDate=a),type:"date",id:"hireDate",class:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 ease-in-out hover:border-blue-300",required:""},null,512),[[r,s.value.hireDate]])]),t("div",ke,[e[29]||(e[29]=t("label",{for:"sss",class:"text-sm font-medium text-gray-700"},"SSS ID",-1)),l(t("input",{"onUpdate:modelValue":e[10]||(e[10]=a=>s.value.sss=a),type:"text",id:"sss",class:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 ease-in-out hover:border-blue-300",placeholder:"1234567890",pattern:"\\d{10}",title:"Please enter a 10-digit SSS ID (e.g., 1234567890)"},null,512),[[r,s.value.sss]])]),t("div",Se,[e[30]||(e[30]=t("label",{for:"philhealth",class:"text-sm font-medium text-gray-700"},"PhilHealth ID",-1)),l(t("input",{"onUpdate:modelValue":e[11]||(e[11]=a=>s.value.philhealth=a),type:"text",id:"philhealth",class:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 ease-in-out hover:border-blue-300",placeholder:"123456789012",pattern:"\\d{12}",title:"Please enter a 12-digit PhilHealth ID (e.g., 123456789012)"},null,512),[[r,s.value.philhealth]])]),t("div",Ie,[e[31]||(e[31]=t("label",{for:"pagibig",class:"text-sm font-medium text-gray-700"},"Pag-IBIG ID",-1)),l(t("input",{"onUpdate:modelValue":e[12]||(e[12]=a=>s.value.pagibig=a),type:"text",id:"pagibig",class:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 ease-in-out hover:border-blue-300",placeholder:"123456789012",pattern:"\\d{12}",title:"Please enter a 12-digit Pag-IBIG ID (e.g., 123456789012)"},null,512),[[r,s.value.pagibig]])]),t("div",Pe,[e[32]||(e[32]=t("label",{for:"tin",class:"text-sm font-medium text-gray-700"},"TIN",-1)),l(t("input",{"onUpdate:modelValue":e[13]||(e[13]=a=>s.value.tin=a),type:"text",id:"tin",class:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 ease-in-out hover:border-blue-300",placeholder:"123456789",pattern:"\\d{9,12}",title:"Please enter a 9-12 digit TIN (e.g., 123456789)"},null,512),[[r,s.value.tin]])])])]),t("div",null,[e[40]||(e[40]=t("h3",{class:"text-base font-semibold text-gray-800 mb-3"},"Login Credentials",-1)),t("div",Ce,[t("div",De,[e[34]||(e[34]=t("label",{for:"username",class:"text-sm font-medium text-gray-700"},"Username",-1)),l(t("input",{"onUpdate:modelValue":e[14]||(e[14]=a=>s.value.username=a),type:"text",id:"username",class:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-300 ease-in-out hover:border-blue-300",placeholder:"Choose a username",required:"",minlength:"4"},null,512),[[r,s.value.username]])]),t("div",qe,[e[37]||(e[37]=t("label",{for:"password",class:"text-sm font-medium text-gray-700"},"Password",-1)),t("div",Ve,[l(t("input",{"onUpdate:modelValue":e[15]||(e[15]=a=>s.value.password=a),type:x.value?"text":"password",id:"password",class:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-10 transition-all duration-300 ease-in-out hover:border-blue-300",placeholder:"Choose a password",required:"",minlength:"8",onInput:q},null,40,Me),[[R,s.value.password]]),t("button",{type:"button",onClick:L,class:"absolute inset-y-0 right-0 pr-3 flex items-center transition-transform duration-300 hover:scale-110"},e[35]||(e[35]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 text-gray-500"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))]),t("div",Ue,[e[36]||(e[36]=E(" Password strength: ")),t("span",{class:A(j.value)},c(N.value),3)]),u.value?(p(),d("p",Ee,c(u.value),1)):f("",!0)]),t("div",ze,[e[39]||(e[39]=t("label",{for:"confirmPassword",class:"text-sm font-medium text-gray-700"},"Confirm Password",-1)),t("div",Be,[l(t("input",{"onUpdate:modelValue":e[16]||(e[16]=a=>h.value=a),type:w.value?"text":"password",id:"confirmPassword",class:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-10 transition-all duration-300 ease-in-out hover:border-blue-300",placeholder:"Confirm your password",required:"",onInput:q},null,40,Re),[[R,h.value]]),t("button",{type:"button",onClick:$,class:"absolute inset-y-0 right-0 pr-3 flex items-center transition-transform duration-300 hover:scale-110"},e[38]||(e[38]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 text-gray-500"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))]),C.value?f("",!0):(p(),d("div",Ae," Passwords do not match "))])])]),t("div",Fe,[t("button",{type:"button",onClick:P,class:"bg-gray-500 text-white py-2 px-4 rounded-lg hover:bg-gray-600 transition-all duration-300 ease-in-out transform hover:scale-105 disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:y.value}," Cancel ",8,Te),t("button",{type:"submit",class:"bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-all duration-300 ease-in-out transform hover:scale-105 disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:W.value},c(y.value?"Submitting...":"Submit Request"),9,je)]),i.value?(p(),d("div",{key:0,class:A([i.value.includes("successfully")?"bg-green-50 text-green-700":"bg-red-50 text-red-700","mt-4 p-3 rounded-lg text-center animate-bounce-in"])},c(i.value),3)):f("",!0)],32)])]),_:1},8,["show"])],64))}},Ze=Q(We,[["__scopeId","data-v-85c01ab5"]]);export{Ze as default};
