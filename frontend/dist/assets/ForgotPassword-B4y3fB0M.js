import{a as w}from"./index-t--hEgTQ.js";import{_ as h,c as n,a as s,e as c,t as d,f as g,g as u,v as m,b as f,w as b,r as x,z as v,o as a,h as y}from"./index-D08fRg5P.js";const P={name:"ForgotPassword",data(){return{step:1,email:"",verificationCode:"",newPassword:"",showPassword:!1,error:"",isProcessing:!1,resetToken:""}},methods:{async sendVerificationCode(){var r,e;this.isProcessing=!0,this.error="";try{const i=await w.post("http://localhost:7777/api/employees/forgot-password",{email:this.email});this.resetToken=i.data.resetToken,this.step=2}catch(i){this.error=((e=(r=i.response)==null?void 0:r.data)==null?void 0:e.error)||"Failed to send verification code. Please try again."}finally{this.isProcessing=!1}},async resetPassword(){var r,e;this.isProcessing=!0,this.error="";try{await w.post("http://localhost:7777/api/employees/reset-password",{email:this.email,resetToken:this.resetToken,verificationCode:this.verificationCode,newPassword:this.newPassword}),this.$router.push("/employee-login")}catch(i){this.error=((e=(r=i.response)==null?void 0:r.data)==null?void 0:e.error)||"Failed to reset password. Please try again."}finally{this.isProcessing=!1}},togglePasswordVisibility(){this.showPassword=!this.showPassword}}},k={class:"min-h-screen bg-gradient-to-br from-blue-50 to-cyan-100 flex items-center justify-center p-4"},_={class:"w-full max-w-md"},C={class:"bg-white/80 backdrop-blur-lg rounded-2xl shadow-xl p-8 space-y-6"},V={class:"text-center space-y-2"},M={class:"text-gray-500 text-sm"},B={class:"space-y-1"},E={key:0,class:"text-red-500 text-sm text-center"},T=["disabled"],j={class:"text-center"},N={class:"space-y-1"},S={class:"space-y-1"},z={class:"relative"},F=["type"],q={key:0,class:"text-red-500 text-sm text-center"},D=["disabled"],L={class:"text-center"};function R(r,e,i,U,t,l){const p=x("router-link");return a(),n("div",k,[s("div",_,[s("div",C,[s("div",V,[e[6]||(e[6]=s("div",{class:"bg-blue-500 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 15l-2 5L9 9l11 4-5 2zm0 0l5 5M7.188 2.239l.777 2.897M5.136 7.965l-2.898-.777M13.95 4.05l-2.122 2.122m-5.657 5.656l-2.12 2.122"})])],-1)),e[7]||(e[7]=s("h1",{class:"text-2xl font-bold text-gray-900"},"Reset Password",-1)),s("p",M,d(t.step===1?"Enter your email to receive a verification code":"Enter the code and your new password"),1)]),t.step===1?(a(),n("form",{key:0,onSubmit:e[1]||(e[1]=g((...o)=>l.sendVerificationCode&&l.sendVerificationCode(...o),["prevent"])),class:"space-y-4"},[s("div",B,[e[8]||(e[8]=s("label",{for:"email",class:"text-sm font-medium text-gray-700"},"Email",-1)),u(s("input",{"onUpdate:modelValue":e[0]||(e[0]=o=>t.email=o),type:"email",id:"email",class:"block w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter your email",required:""},null,512),[[m,t.email]])]),t.error?(a(),n("div",E,d(t.error),1)):c("",!0),s("button",{type:"submit",class:"w-full bg-blue-500 text-white py-2.5 rounded-lg hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:t.isProcessing},d(t.isProcessing?"Sending...":"Send Verification Code"),9,T),s("div",j,[f(p,{to:"/employee-login",class:"text-sm text-blue-500 hover:underline"},{default:b(()=>e[9]||(e[9]=[y("Back to Login")])),_:1})])],32)):c("",!0),t.step===2?(a(),n("form",{key:1,onSubmit:e[5]||(e[5]=g((...o)=>l.resetPassword&&l.resetPassword(...o),["prevent"])),class:"space-y-4"},[s("div",N,[e[10]||(e[10]=s("label",{for:"code",class:"text-sm font-medium text-gray-700"},"Verification Code",-1)),u(s("input",{"onUpdate:modelValue":e[2]||(e[2]=o=>t.verificationCode=o),type:"text",id:"code",class:"block w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter the code",required:""},null,512),[[m,t.verificationCode]])]),s("div",S,[e[12]||(e[12]=s("label",{for:"newPassword",class:"text-sm font-medium text-gray-700"},"New Password",-1)),s("div",z,[u(s("input",{"onUpdate:modelValue":e[3]||(e[3]=o=>t.newPassword=o),type:t.showPassword?"text":"password",id:"newPassword",class:"block w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent pr-10",placeholder:"Enter new password",required:"",minlength:"8"},null,8,F),[[v,t.newPassword]]),s("button",{type:"button",onClick:e[4]||(e[4]=(...o)=>l.togglePasswordVisibility&&l.togglePasswordVisibility(...o)),class:"absolute inset-y-0 right-0 pr-3 flex items-center"},e[11]||(e[11]=[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5 text-gray-500"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M2.036 12.322a1.012 1.012 0 010-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178z"}),s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})],-1)]))])]),t.error?(a(),n("div",q,d(t.error),1)):c("",!0),s("button",{type:"submit",class:"w-full bg-blue-500 text-white py-2.5 rounded-lg hover:bg-blue-600 disabled:bg-gray-400 disabled:cursor-not-allowed",disabled:t.isProcessing},d(t.isProcessing?"Resetting...":"Reset Password"),9,D),s("div",L,[f(p,{to:"/employee-login",class:"text-sm text-blue-500 hover:underline"},{default:b(()=>e[13]||(e[13]=[y("Back to Login")])),_:1})])],32)):c("",!0)])])])}const G=h(P,[["render",R],["__scopeId","data-v-d56d9aae"]]);export{G as default};
