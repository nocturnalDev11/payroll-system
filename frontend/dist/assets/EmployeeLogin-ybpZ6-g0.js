import{_ as S,i as g,j as b,k as j,l as I,c as l,e as m,o as a,a as t,t as x,n as M,u as N,F as T,m as $,d as E,f as L,g as k,v as _,b as C,w as P,r as B,p as V,q as z,s as q,h as A,B as D}from"./index-D08fRg5P.js";import U from"./EmployeeSignup-C6YSMRp-.js";import"./index-t--hEgTQ.js";import"./Modal-C0QXdCOS.js";const F={class:"flex items-center justify-between p-3"},H={class:"flex items-center space-x-3"},R={class:"p-2 rounded-lg bg-gray-50"},O=["stroke"],J={key:0,"stroke-linecap":"round","stroke-linejoin":"round",d:"m4.5 12.75 6 6 9-13.5"},W={key:1,"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"},G={key:2,"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126zM12 15.75h.007v.008H12v-.008z"},K={key:3,"stroke-linecap":"round","stroke-linejoin":"round",d:"M11.25 11.25l.041-.02a.75.75 0 011.063.852l-.708 2.836a.75.75 0 001.063.853l.041-.021M21 12a9 9 0 11-18 0 9 9 0 0118 0zm-9-3.75h.008v.008H12V8.25z"},Q={class:"text-sm font-semibold text-gray-900"},X={key:0,class:"text-xs text-gray-600"},Y={__name:"Toast",props:{message:{type:String,required:!0},description:{type:String,default:""},type:{type:String,default:"info"},duration:{type:Number,default:3e3}},emits:["close"],setup(u,{emit:w}){const y=u,d=w,o=g(!1),i=b(()=>{switch(y.type){case"success":return"check";case"error":return"close";case"warning":return"warning";case"info":return"info";default:return"info"}}),f=b(()=>{switch(y.type){case"success":return"#2b9875";case"error":return"#dc2626";case"warning":return"#f59e0b";case"info":return"#3b82f6";default:return"#3b82f6"}}),p=b(()=>({"translate-y-0 opacity-100 scale-100":o.value,"translate-y-10 opacity-0 scale-95":!o.value}));j(()=>{o.value=!0;const v=setTimeout(()=>{o.value=!1,setTimeout(()=>d("close"),300)},y.duration);return()=>clearTimeout(v)}),I(()=>{o.value=!1});const r=()=>{o.value=!1,setTimeout(()=>d("close"),300)};return(v,h)=>u.message?(a(),l("div",{key:0,class:M([["toast",p.value],"fixed bottom-6 right-6 z-1000 max-w-xs w-full rounded-xl shadow-lg transition-all duration-300 ease-in-out transform bg-white border border-gray-200"]),role:"alert","aria-live":"polite","aria-atomic":"true"},[t("div",F,[t("div",H,[t("div",R,[(a(),l("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:f.value,class:"w-6 h-6"},[i.value==="check"?(a(),l("path",J)):m("",!0),i.value==="close"?(a(),l("path",W)):m("",!0),i.value==="warning"?(a(),l("path",G)):m("",!0),i.value==="info"?(a(),l("path",K)):m("",!0)],8,O))]),t("div",null,[t("p",Q,x(u.message),1),u.description?(a(),l("p",X,x(u.description),1)):m("",!0)])]),t("button",{onClick:r,class:"text-gray-500 hover:text-gray-700 focus:outline-none focus:ring-2 focus:ring-gray-300 rounded-full p-1 transition-colors duration-200","aria-label":"Close notification"},h[0]||(h[0]=[t("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5"},[t("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M6 18 18 6M6 6l12 12"})],-1)]))])],2)):m("",!0)}},Z=S(Y,[["__scopeId","data-v-37703e79"]]),ee={class:"min-h-screen bg-gradient-to-br from-blue-50 to-cyan-100 flex items-center justify-center p-4"},te={class:"w-full max-w-md relative"},se={class:"absolute top-0 left-0 right-0 flex flex-col items-center space-y-2"},oe={class:"bg-white/80 backdrop-blur-lg rounded-2xl shadow-xl p-8 space-y-6"},ae={class:"space-y-1"},re={class:"space-y-1"},ne={class:"flex items-center justify-end"},le=["disabled"],ie={class:"text-center"},ce={__name:"EmployeeLogin",setup(u){const w=V(),y=z(),d=g(!1),o=g(""),i=g(""),f=N(),p=g([]);function r(n,e="info"){const s=Date.now();p.value.push({id:s,message:n,type:e})}function v(n){p.value=p.value.filter(e=>e.id!==n)}async function h(){try{d.value=!0;const n=await fetch(`${D}/api/employees/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:o.value.toLowerCase(),password:i.value})}),e=await n.json();if(n.ok){f.setEmployee({id:e.employee.id,firstName:e.employee.firstName,lastName:e.employee.lastName,username:e.employee.username,email:e.employee.email,employeeIdNumber:e.employee.employeeIdNumber,birthday:e.employee.birthday,hireDate:e.employee.hireDate,contactInfo:e.employee.contactInfo,civilStatus:e.employee.civilStatus,position:e.employee.position,salary:e.employee.salary,sss:e.employee.sss,philHealth:e.employee.philHealth,pagIbig:e.employee.pagIbig,role:e.employee.role}),f.setAccessToken(e.token),r("Login successful! Redirecting...","success");const s=w.query.redirect||"/employee/dashboard";y.push(s)}else{const s=e.message||"Login failed";s.includes("Email not found")?r("Email not found. Please check your email.","error"):s.includes("Incorrect password")?r("Incorrect password. Please try again.","error"):s.includes("awaiting approval")?r("Account awaiting approval. Please wait for admin approval.","warning"):s.includes("rejected")?r("Account request was rejected. Contact the administrator.","error"):r(s,"error")}}catch(n){console.error("Login error:",n),r("Something went wrong. Please try again.","error")}finally{d.value=!1}}return(n,e)=>{const s=B("router-link");return a(),l("div",ee,[t("div",te,[t("div",se,[(a(!0),l(T,null,$(p.value,c=>(a(),q(Z,{key:c.id,message:c.message,type:c.type,duration:3e3,onClose:de=>v(c.id)},null,8,["message","type","onClose"]))),128))]),t("div",oe,[e[5]||(e[5]=E('<div class="text-center space-y-2" data-v-c49ac549><div class="bg-blue-500 w-16 h-16 rounded-full flex items-center justify-center mx-auto mb-4" data-v-c49ac549><svg xmlns="http://www.w3.org/2000/svg" class="w-8 h-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" data-v-c49ac549><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" data-v-c49ac549></path></svg></div><h1 class="text-2xl font-bold text-gray-900" data-v-c49ac549>Employee Portal</h1><p class="text-gray-500 text-sm" data-v-c49ac549>Welcome to your workspace</p></div>',1)),t("form",{onSubmit:L(h,["prevent"]),class:"space-y-4"},[t("div",ae,[e[2]||(e[2]=t("label",{for:"username",class:"text-sm font-medium text-gray-700"},"Username",-1)),k(t("input",{"onUpdate:modelValue":e[0]||(e[0]=c=>o.value=c),type:"text",id:"username",class:"block w-full p-2 border border-gray-300 rounded-lg",placeholder:"Enter your username",required:""},null,512),[[_,o.value]])]),t("div",re,[e[3]||(e[3]=t("label",{for:"password",class:"text-sm font-medium text-gray-700"},"Password",-1)),k(t("input",{"onUpdate:modelValue":e[1]||(e[1]=c=>i.value=c),type:"password",id:"password",class:"block w-full p-2 border border-gray-300 rounded-lg",placeholder:"Enter your password",required:""},null,512),[[_,i.value]])]),t("div",ne,[C(s,{to:{name:"ForgotPassword"},class:"text-sm text-indigo-600 hover:text-indigo-700"},{default:P(()=>e[4]||(e[4]=[A(" Forgot Password? ")])),_:1})]),t("button",{type:"submit",disabled:d.value,class:"w-full bg-blue-500 text-white py-2.5 rounded-lg cursor-pointer disabled:bg-blue-300"},x(d.value?"Signing in...":"Sign in"),9,le)],32),t("div",ie,[C(U)])])])])}}},ge=S(ce,[["__scopeId","data-v-c49ac549"]]);export{ge as default};
